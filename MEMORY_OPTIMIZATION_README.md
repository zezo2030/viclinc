# حل مشكلة الذاكرة في Next.js

## المشكلة
```
Error: ENOMEM: not enough memory, scandir '/app/src/app/appointments'
```

## الحلول المطبقة

### 1. تحسين إعدادات Next.js
- إضافة إعدادات webpack لتحسين استهلاك الذاكرة
- تحسين تقسيم الكود (code splitting)
- تقليل عدد الملفات المراقبة
- تحسين إعدادات التطوير

### 2. تحسين إعدادات Docker
- زيادة حد الذاكرة إلى 4GB
- إضافة متغيرات البيئة لتحسين الذاكرة
- إضافة tmpfs للذاكرة المؤقتة

### 3. تقسيم ملفات البيانات
- تقسيم `mock-data.ts` إلى ملفات أصغر
- تقليل حجم الملفات المحملة في الذاكرة
- تحسين استيراد البيانات

### 4. إعدادات إضافية
- إضافة `NODE_OPTIONS` لزيادة حد الذاكرة
- تعطيل telemetry لتوفير الذاكرة
- تحسين إعدادات webpack

## الأوامر الجديدة

### للتطوير العادي
```bash
npm run dev
```

### للتطوير مع ذاكرة أكبر
```bash
npm run dev:memory
```

### للتطوير المحسن
```bash
npm run dev:optimized
```

## إعدادات Docker
تم تحديث `docker-compose.dev.yml` لتشمل:
- حد ذاكرة 4GB
- إعدادات tmpfs للذاكرة المؤقتة
- متغيرات البيئة المحسنة

## النتائج المتوقعة
- تقليل استهلاك الذاكرة بنسبة 40-60%
- تحسين سرعة التطوير
- تقليل أخطاء ENOMEM
- تحسين أداء التطبيق

## نصائح إضافية
1. أغلق التطبيقات غير المستخدمة
2. استخدم `npm run dev:memory` إذا استمرت المشكلة
3. تأكد من وجود مساحة كافية في القرص الصلب
4. أعد تشغيل Docker إذا لزم الأمر
