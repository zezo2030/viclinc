# ูุธุงู ุงููุตุงุฏูุฉ (Authentication System)

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู ูุธุงู ูุตุงุฏูุฉ ูุงูู ูู ุงูุชุทุจูู ูุฑุจุท ุจูู ุงูู Backend ูุงูู Frontend ูุน ุงููููุฒุงุช ุงูุชุงููุฉ:

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. Backend Authentication (NestJS)

#### ุงูู API Endpoints:
- `POST /auth/login` - ุชุณุฌูู ุงูุฏุฎูู (ูุฌููุน ุงููุณุชุฎุฏููู)
- `POST /auth/register/patient` - ุชุณุฌูู ุงููุฑุถู ููุท
- `GET /auth/profile` - ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู
- `POST /admin/doctors` - ุฅุถุงูุฉ ุงูุฃุทุจุงุก (ููุฃุฏูู ููุท)

#### ุงูููููุงุช:
- **AuthController** - ูุนุงูุฌ ุทูุจุงุช ุงููุตุงุฏูุฉ
- **AuthService** - ููุทู ุฃุนูุงู ุงููุตุงุฏูุฉ
- **JwtStrategy** - ุฅุณุชุฑุงุชูุฌูุฉ JWT
- **LocalStrategy** - ุฅุณุชุฑุงุชูุฌูุฉ ุงููุตุงุฏูุฉ ุงููุญููุฉ
- **Auth Guards** - ุญูุงูุฉ ุงููุณุงุฑุงุช

### 2. Frontend Authentication (Next.js + React)

#### ุงูููููุงุช ุงูุฑุฆูุณูุฉ:
- **AuthContext** - ุฅุฏุงุฑุฉ ุญุงูุฉ ุงููุณุชุฎุฏู
- **AuthModal** - ูุงูุฐุฉ ููุจุซูุฉ ููุฏุฎูู/ุงูุชุณุฌูู
- **LoginForm** - ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู
- **RegisterForm** - ูููุฐุฌ ุฅูุดุงุก ุงูุญุณุงุจ
- **ProtectedRoute** - ุญูุงูุฉ ุงููุณุงุฑุงุช

#### ุงูู API Client:
- **apiClient** - ุนููู API ูุน ุฅุถุงูุฉ JWT token ุชููุงุฆูุงู
- **authApi** - ุฏูุงู API ูููุตุงุฏูุฉ

## ููููุฉ ุงูุนูู

### 1. ุชุณุฌูู ุงูุฏุฎูู
1. ุงููุณุชุฎุฏู ูุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
2. ูุชู ุฅุฑุณุงู ุงูุทูุจ ุฅูู `POST /auth/login`
3. ุงูู Backend ูุชุญูู ูู ุงูุจูุงูุงุช ููุนูุฏ JWT token
4. ุงูู Frontend ูุญูุธ ุงูุชููู ูู localStorage
5. ูุชู ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู ูู AuthContext

### 2. ุญูุงูุฉ ุงููุณุงุฑุงุช
1. **ProtectedRoute Component** ูุชุญูู ูู ุญุงูุฉ ุงููุณุชุฎุฏู
2. ุฅุฐุง ูู ููู ูุตุงุฏูุ ูุธูุฑ ุฑุณุงูุฉ ุฃู AuthModal
3. ุฅุฐุง ูุงู ูุตุงุฏูุ ูุนุฑุถ ุงููุญุชูู ุงููุญูู

### 3. ุฅุฏุงุฑุฉ ุงูุชููู
- ูุชู ุญูุธ JWT token ูู localStorage
- ูุชู ุฅุถุงูุชู ุชููุงุฆูุงู ุฅูู headers ูู ูู ุทูุจ API
- ุนูุฏ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุชูููุ ูุชู ูุณุญ ุงูุจูุงูุงุช ูุฅุนุงุฏุฉ ุชูุฌูู ููุฏุฎูู

## ุงููููุงุช ุงููููุฉ

### Frontend Files:
```
src/
โโโ lib/
โ   โโโ api/
โ   โ   โโโ auth.ts          # Auth API functions
โ   โ   โโโ client.ts         # API client with JWT interceptor
โ   โโโ contexts/
โ       โโโ auth-context.tsx  # Auth context and provider
โโโ components/
โ   โโโ auth/
โ       โโโ AuthModal.tsx     # Modal for login/register
โ       โโโ LoginForm.tsx     # Login form component
โ       โโโ RegisterForm.tsx  # Register form component
โ       โโโ ProtectedRoute.tsx # Route protection component
โโโ app/
    โโโ login/page.tsx        # Login page
    โโโ register/page.tsx     # Register page
    โโโ dashboard/page.tsx    # Protected dashboard page
    โโโ profile/page.tsx      # Protected profile page
```

### Backend Files:
```
src/
โโโ modules/
โ   โโโ auth/
โ       โโโ auth.controller.ts  # Auth endpoints
โ       โโโ auth.service.ts     # Auth business logic
โ       โโโ dto/
โ       โ   โโโ login.dto.ts    # Login DTO
โ       โโโ strategies/
โ           โโโ jwt.strategy.ts # JWT strategy
โ           โโโ local.strategy.ts # Local strategy
โโโ config/
    โโโ jwt.config.ts          # JWT configuration
```

## ุงูุงุณุชุฎุฏุงู

### 1. ูู ุงูููููุงุช:
```tsx
import { useAuth } from '@/lib/contexts/auth-context';

function MyComponent() {
  const { user, login, logout, isAuthenticated } = useAuth();

  if (!isAuthenticated) {
    return <div>ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู</div>;
  }

  return (
    <div>
      <p>ูุฑุญุจุงู {user?.name}</p>
      <button onClick={logout}>ุชุณุฌูู ุงูุฎุฑูุฌ</button>
    </div>
  );
}
```

### 2. ุญูุงูุฉ ุงูุตูุญุงุช:
```tsx
import { ProtectedRoute } from '@/components/auth';

export default function ProtectedPage() {
  return (
    <ProtectedRoute requiredRole="ADMIN">
      <div>ูุญุชูู ูุญูู ูููุฏูุฑูู ููุท</div>
    </ProtectedRoute>
  );
}
```

### 3. ุงุณุชุฎุฏุงู API:
```tsx
import { authApi } from '@/lib/api/auth';

const handleLogin = async () => {
  try {
    const response = await authApi.login({
      email: 'user@example.com',
      password: 'password123'
    });
    console.log('ุชู ุชุณุฌูู ุงูุฏุฎูู:', response.user);
  } catch (error) {
    console.error('ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู:', error);
  }
};
```

## ูุธุงู ุงููุณุชุฎุฏููู

### ุชุณุฌูู ุงููุฑุถู
- โ **ุชุณุฌูู ุงููุฑุถู ูุจุงุดุฑุฉ** ูู ุฎูุงู ุงููููุน
- โ **ูููุฐุฌ ุชุณุฌูู ูุจุณุท** ูููุฑุถู ููุท
- โ **ุชูุฌูู ุชููุงุฆู** ุฅูู ููุญุฉ ุงูุชุญูู ุจุนุฏ ุงูุชุณุฌูู

### ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก
- โ **ุฅุถุงูุฉ ุงูุฃุทุจุงุก ูู ูุจู ุงูุฃุฏูู** ูู ุงูุจุงู ุฅูุฏ
- โ **ุชุณุฌูู ุฏุฎูู ุงูุฃุทุจุงุก** ุจุญุณุงุจุงุชูู ุงููุถุงูุฉ
- โ **ุนุฏู ุฅููุงููุฉ ุชุณุฌูู ุงูุฃุทุจุงุก** ูุจุงุดุฑุฉ ูู ุงููููุน

## ุงููููุฒุงุช

โ **ุชุณุฌูู ุฏุฎูู/ุฎุฑูุฌ ูุงูู**
โ **ุฅูุดุงุก ุญุณุงุจ ูููุฑุถู ููุท**
โ **ุญูุงูุฉ ุงููุณุงุฑุงุช**
โ **ุฅุฏุงุฑุฉ JWT tokens**
โ **ูุงุฌูุฉ ุนุฑุจูุฉ ูุงููุฉ**
โ **ุชุตููู ูุชุฌุงูุจ**
โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
โ **ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช**
โ **ุญูุธ ุญุงูุฉ ุงููุณุชุฎุฏู**
โ **ูุธุงู ุฃุฏูุงุฑ ูููุตู** ูููุฑุถู ูุงูุฃุทุจุงุก

## ุงูุชุทููุฑ ุงููุณุชูุจูู

๐ **ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงููุณุงุฑุงุช ุงููุญููุฉ**
๐ **ุชุทุจูู ูุธุงู ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช**
๐ **ุฅุถุงูุฉ ุฎุงุตูุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ**
๐ **ุฅุถุงูุฉ ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ**
๐ **ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู**
๐ **ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุชุญููุงุช ุงูุฃูููุฉ**

## ุงูุชุดุบูู

1. ุชุฃูุฏ ูู ุชุดุบูู ุงูู Backend server
2. ุดุบู ุงูู Frontend development server
3. ุงูุชุญ ุงููุชุตูุญ ูุฌุฑุจ ุงููุตุงุฏูุฉ

## ููุงุญุธุงุช ูููุฉ

- ูุชู ุญูุธ JWT token ูู localStorage ููุฏุฉ 7 ุฃูุงู
- ูุชู ุฅุถุงูุฉ ุงูุชููู ุชููุงุฆูุงู ุฅูู ูู ุทูุจ API
- ุนูุฏ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุชูููุ ูุชู ุฅุนุงุฏุฉ ุชูุฌูู ุงููุณุชุฎุฏู ููุฏุฎูู
- ุฌููุน ุงููุตูุต ูุงูุฑุณุงุฆู ุจุงููุบุฉ ุงูุนุฑุจูุฉ
